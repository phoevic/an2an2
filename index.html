<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ë°¥ ì¶”ì²œ + ìŒì‹ ê°¤ëŸ¬ê·¸</title>
<style>
    body {
        text-align: center;
        background: #fff3d6;
        font-family: Arial, sans-serif;
    }
    canvas {
        background: black;
        display: block;
        margin: 10px auto;
        border: 3px solid #333;
    }
    button {
        padding: 10px 15px;
        margin: 5px;
        font-size: 16px;
        cursor: pointer;
    }
</style>
</head>
<body>

<h1>ğŸš ì˜¤ëŠ˜ ë­ ë¨¹ì§€?</h1>
<button onclick="recommendMenu()">ë°¥ ë©”ë‰´ ì¶”ì²œ</button>
<div id="menuResult"></div>

<hr>

<h2>ğŸ® ìºë¦­í„° ì„ íƒ</h2>
<button onclick="selectCharacter('ğŸš€')">ğŸš€ ìš°ì£¼ì„ </button>
<button onclick="selectCharacter('ğŸ½ï¸')">ğŸ½ï¸ ì ‘ì‹œ</button>
<button onclick="selectCharacter('ğŸ±')">ğŸ± ê³ ì–‘ì´</button>

<h3 id="selectedChar">ì„ íƒëœ ìºë¦­í„°: ì—†ìŒ</h3>

<canvas id="gameCanvas" width="400" height="500"></canvas>
<p>â† â†’ ì´ë™ | Space ë°œì‚¬</p>

<script>
/* ===== ë©”ë‰´ ì¶”ì²œ ===== */
const menus = ["ê¹€ì¹˜ì°Œê°œ","ëˆê¹ŒìŠ¤","ë¼ë©´","ì´ˆë°¥","ì¹˜í‚¨","ë¹„ë¹”ë°¥","í–„ë²„ê±°"];
function recommendMenu() {
    menuResult.innerText =
        "ğŸ‘‰ ì˜¤ëŠ˜ì˜ ì¶”ì²œ ë©”ë‰´: " + menus[Math.floor(Math.random()*menus.length)];
}

/* ===== íš¨ê³¼ìŒ ===== */
const shootSound = new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg");
const hitSound = new Audio("https://actions.google.com/sounds/v1/cartoon/pop.ogg");
const gameOverSound = new Audio("https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg");

/* ===== ê²Œì„ ===== */
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let playerChar = "";
let player = { x: 180, y: 450 };
let bullets = [];
let enemies = [];
let score = 0;
let lives = 3;
let gameOver = false;

const foods = ["ğŸ•","ğŸ”","ğŸœ","ğŸ£","ğŸ©"];

function selectCharacter(char) {
    playerChar = char;
    document.getElementById("selectedChar").innerText =
        "ì„ íƒëœ ìºë¦­í„°: " + char;
}

/* í‚¤ ì…ë ¥ */
document.addEventListener("keydown", e => {
    if (gameOver || !playerChar) return;

    if (e.key === "ArrowLeft" && player.x > 0) player.x -= 15;
    if (e.key === "ArrowRight" && player.x < 360) player.x += 15;
    if (e.key === " ") {
        bullets.push({ x: player.x + 10, y: player.y });
        shootSound.play();
    }
});

function spawnEnemy() {
    if (!gameOver && playerChar)
        enemies.push({
            x: Math.random()*360,
            y: 0,
            emoji: foods[Math.floor(Math.random()*foods.length)]
        });
}

function update() {
    ctx.clearRect(0,0,canvas.width,canvas.height);

    if (!playerChar) {
        ctx.fillStyle = "white";
        ctx.font = "20px Arial";
        ctx.fillText("ìºë¦­í„°ë¥¼ ì„ íƒí•˜ì„¸ìš”!", 100, 250);
        requestAnimationFrame(update);
        return;
    }

    if (gameOver) {
        ctx.fillStyle = "red";
        ctx.font = "30px Arial";
        ctx.fillText("GAME OVER", 100, 250);
        ctx.font = "18px Arial";
        ctx.fillText("ì ìˆ˜: " + score, 150, 290);
        return;
    }

    /* í”Œë ˆì´ì–´ */
    ctx.font = "30px serif";
    ctx.fillText(playerChar, player.x, player.y);

    /* ì´ì•Œ */
    bullets.forEach((b,i)=>{
        b.y -= 8;
        ctx.fillStyle="yellow";
        ctx.fillRect(b.x,b.y,4,10);
        if(b.y<0) bullets.splice(i,1);
    });

    /* ì  */
    enemies.forEach((e,ei)=>{
        e.y += 2;
        ctx.font="26px serif";
        ctx.fillText(e.emoji,e.x,e.y);

        // ì¶©ëŒ
        bullets.forEach((b,bi)=>{
            if(b.x>e.x && b.x<e.x+24 && b.y>e.y-24 && b.y<e.y){
                enemies.splice(ei,1);
                bullets.splice(bi,1);
                score+=10;
                hitSound.play();
            }
        });

        // ë°”ë‹¥ ë„ë‹¬
        if(e.y>canvas.height){
            enemies.splice(ei,1);
            lives--;
            if(lives<=0){
                gameOver=true;
                gameOverSound.play();
            }
        }
    });

    /* UI */
    ctx.fillStyle="white";
    ctx.font="16px Arial";
    ctx.fillText("Score: "+score,10,20);
    ctx.fillText("Lives: â¤ï¸".repeat(lives),300,20);

    requestAnimationFrame(update);
}

setInterval(spawnEnemy,1000);
update();
</script>

</body>
</html>
